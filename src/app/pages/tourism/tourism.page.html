<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Gestion des lieux touristiques</ion-title>
    <ion-buttons slot="end">
      <ion-button id="open-modal" (click)="reinitForm()">Ajouter un lieu</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Gestion des lieux touristiques</ion-title>
    </ion-toolbar>
  </ion-header>

  @if (tourismList) {
    <ion-list inset="true">
      @if (tourismList.totalItems < 1) {
        <ion-item>
          <ion-label>Il n'y a pas de points touristiques ajoutés</ion-label>
        </ion-item>  
      } @else {
        @for (tourism of tourismList.member; track tourism.id) {
          <ion-item>
            <ion-label>{{ tourism.tourismName }}</ion-label>
            <ion-buttons slot="end">
              <ion-button (click)="updateTourism(tourism.id)">Modifier</ion-button>
              <ion-button (click)="deleteTourism(tourism.id)" color="danger">Supprimer</ion-button>
            </ion-buttons>
          </ion-item>   
        }
      }
    </ion-list>  
  }

  <ion-modal trigger="open-modal">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>
            {{ tourismToUpdate ? 'Modifier un lieu touristique' : 'Ajouter un lieu touristique' }}
          </ion-title>
          <ion-buttons slot="end">
            <ion-button color="danger" (click)="closeModal()">Fermer</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <ion-list inset="true" [formGroup]="form">
          <ion-item>
            <ion-input label="Nom du lieu" labelPlacement="stacked" type="text" formControlName="tourismName"></ion-input>
          </ion-item>
          <ion-item>
            <ion-textarea label="Description" labelPlacement="stacked" formControlName="tourismContent"></ion-textarea>
          </ion-item>
          <ion-item>
            <ion-input label="Téléphone" labelPlacement="stacked" type="tel" formControlName="tourismPhone"></ion-input>
          </ion-item>
          <ion-item>
            <ion-input label="Lien de réservation (Si existant)" labelPlacement="stacked" type="url" formControlName="tourismReserve"></ion-input>
          </ion-item>
          <ion-item>
            <ion-input label="Site internet (Si existant)" labelPlacement="stacked" type="url" formControlName="tourismWebsite"></ion-input>
          </ion-item>
            <ion-item>
              <ion-select label="Catégorie" labelPlacement="stacked" formControlName="tourismCategory">
                @for (cat of categoriesList?.member; track cat.id) {
                  <ion-select-option [value]="`/api/categories/${cat.id}`">{{ cat.catName }}</ion-select-option>
                }
              </ion-select>
            </ion-item>
          <ion-item>
            <ion-button (click)="onSubmitForm()" expand="block">
              {{ tourismToUpdate ? 'Mettre à jour le lieu touristique' : 'Créer un lieu touristique' }}
            </ion-button>
          </ion-item>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
